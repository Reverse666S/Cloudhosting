<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>SkyCortex - Admin Dashboard</title>
<link rel="icon" href="/static/pepecraft.png" type="image/png">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body { background-color:#000; color:#fff; font-family:'Roboto',sans-serif; margin:0; padding:0; }
.card { background-color:#0d0d0d; border:1px solid #00ff00; color:#fff; margin-bottom:1rem; }
input, select { background-color:#003300; color:#fff; border:1px solid #00ff00; }
a { color:#00ff00; text-decoration:none; }
a:hover { color:#66ff66; }
.btn-success { background-color:#00ff00; border:none; color:#000; }
.btn-success:hover { background-color:#66ff66; }
.btn-danger { background-color:#ff0000; border:none; color:#000; }
.btn-danger:hover { background-color:#ff6666; }
h3,h4 { margin-bottom:1rem; }
.progress { height:15px; border-radius:5px; }
footer { text-align:center; margin-top:2rem; color:#fff; }
</style>
</head>
<body>
<div class="container py-5">
    <div class="row">
        <div class="col-12 col-md-8">

            <div class="card p-3 shadow-sm mb-3">
                <h3 class="text-center mb-3">Dateien verwalten</h3>
                {% for username, data in all_users.items() %}
                <div class="card mb-2 p-2">
                    <h4>{{ username }} {% if data.is_admin %}(Admin){% endif %}</h4>
                    <ul class="list-group list-group-flush">
                        {% set user_path = user_folder + '/' + username %}
                        {% for file in os.listdir(user_path) %}
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <span>{{ file }}</span>
                            <div>
                                <a href="/download/{{ file }}" class="btn btn-success btn-sm me-1">Download</a>
                                <form method="post" action="/delete/{{ file }}" style="display:inline;">
                                    <button class="btn btn-danger btn-sm">Löschen</button>
                                </form>
                            </div>
                        </li>
                        {% endfor %}
                    </ul>
                    <form method="post" action="/admin_delete_user/{{ username }}" class="mt-2">
                        {% if not data.is_admin %}
                        <button class="btn btn-danger btn-sm w-100">User löschen</button>
                        {% endif %}
                    </form>
                </div>
                {% endfor %}
            </div>
        </div>

        <div class="col-12 col-md-4">
            <div class="card p-3 shadow-sm mb-3">
                <h3 class="text-center mb-3">Neuen User erstellen</h3>
                <form method="post" action="/admin_create_user">
                    <input type="text" name="username" class="form-control mb-2" placeholder="Benutzername" required>
                    <input type="password" name="password" class="form-control mb-2" placeholder="Passwort" required>
                    <input type="email" name="email" class="form-control mb-2" placeholder="E-Mail (optional)">
                    <button type="submit" class="btn btn-success w-100">User erstellen</button>
                </form>
            </div>

            <form method="post" action="/logout">
                <button class="btn btn-outline-secondary w-100">Logout</button>
            </form>
        </div>
    </div>
</div>

<footer>
    <span>Powered by Danger222</span>
    <img src="/static/pepecraft.png" alt="Logo" style="height:50px;">
</footer>
</body>
</html>
